# 🏋️‍♂️ 헬스장 키오스크 시스템 (Java)

[![KR](https://img.shields.io/badge/README-한국어-blue)](./README.gym.ko.md)
[![EN](https://img.shields.io/badge/README-English-red)](./README.gym.md)

## 📖 프로젝트 배경 및 목표
- 헬스장 이용객이 직관적으로 회원 관리 및 결제, 운동 프로그램 확인 등을 할 수 있는 키오스크를 개발.
- 기존 수작업/데스크 직원 의존도가 높은 절차를 자동화하여 운영 효율을 높이는 것을 목표로 함.
- 최대한 실제 키오스크 환경을 고려하여 UI/UX 설계 및 구현.

## 🛠 사용 기술 스택
- **언어**: Java (Swing 기반 UI)
- **IDE**: Eclipse
- **DB**: 텍스트 파일

---

## 🎬 결과 영상
헬스장 키오스크 주요 기능 시연 화면입니다.  
(※ GIF 파일은 로딩 시간이 다소 소요될 수 있습니다.)
- 👤 회원 관리
- 💳 결제 및 프로그램 선택

<img src="https://github.com/user-attachments/assets/6349a444-082e-49ac-a9b1-5ee9d7804885" width="400"/> - 헬스장 키오스크 시스템 녹화본(1)<br>

<img src="https://github.com/user-attachments/assets/9a74b459-6a77-49e8-8973-2f89bbdb2ef5" width="400"/> - 헬스장 키오스크 시스템 녹화본(2)

---

## 🧭 개발 과정에서의 어려움 & 해결

### 1) 화면 멈춤/버벅임 (EDT 블로킹)
- **증상**: 회원 검색·저장 시 UI가 잠깐씩 멈춤.
- **원인**: 파일 I/O와 계산 로직을 Event Dispatch Thread(EDT)에서 동기 실행.
- **해결**: `SwingWorker`/백그라운드 쓰레드로 I/O 분리, UI 갱신만 EDT에서 처리.
- **효과(측정)**: 검색/저장 클릭 후 화면 응답 **~800ms → ~180ms**.

### 2) 해상도 의존 레이아웃(1920×1080)에서의 깨짐
- **증상**: FHD 기준엔 정상이나 125% 스케일/다른 해상도에서 버튼 겹침.
- **원인**: 절대 좌표/고정 픽셀 크기 의존.
- **해결**: `LayoutManager(GridBagLayout)`로 전환, 컨테이너 기준 비율 배치 + 폰트/아이콘 크기 동적 스케일.
- **효과**: 스케일 100~150%에서 UI 요소 겹침 **0건**.

### 3) 텍스트 파일 DB 동시성·정합성
- **증상**: 빠르게 연속 저장 시 간헐적 데이터 손실/깨짐.
- **원인**: 동시 쓰기 경쟁, 부분 쓰기 발생.
- **해결**: 임시파일(`.tmp`)에 완전 기록 후 `Files.move(ATOMIC_MOVE)`로 원자적 교체, 파일 락 사용.
- **효과**: 저장 실패율 **간헐적 → 0%**, 데이터 불일치 **해소**.

### 4) 입력 유효성·경계값 누락
- **증상**: 전화번호·회원권 기간 등 비정상 값 저장.
- **원인**: UI 단 유효성 검증만 수행, 모델 단 방어코드 미흡.
- **해결**: UI + 도메인 모델 **이중 검증**(정규식/범위 체크), 오류 메시지 일관화.
- **효과**: 잘못된 입력으로 인한 예외 건수 **60% 이상 감소**.

### 5) 화면 전환 시 리스너 중복·메모리 증가
- **증상**: 몇 차례 페이지를 왕복하면 클릭 이벤트가 중복 실행.
- **원인**: 새 화면 추가 시 기존 리스너 해제 누락.
- **해결**: 화면 라이프사이클 정리(`init()`/`dispose()`), `removeListener()` 규칙화.
- **효과**: 이벤트 중복 **해소**, 장시간 사용 시 메모리 상승폭 **완화**.

---

## 📝 배운 점

- **EDT 원칙**: 무거운 작업은 절대 EDT에서 돌리지 않기. UI는 가볍게, I/O는 백그라운드.
- **레이아웃 사고 전환**: “픽셀 배치”가 아니라 **관계/비율 배치**로 설계해야 해상도/스케일 변화에 강함.
- **정합성은 저장 시점에서 보장**: UI 검증만으로는 부족. **원자적 쓰기/락/백업**까지 포함해 데이터 안전망 설계.
- **단일 책임 분리**: 화면(View)·도메인(Model)·작업(Worker)을 분리하니 테스트와 유지보수가 쉬워짐.
- **가시화의 힘**: UI 응답시간/파일 I/O 시간을 재서 숫자로 관리하면 개선 우선순위가 명확해짐.

<!--
## 🔧 성능/품질 지표 (측정 방법 포함)

- **UI 응답 시간**: 클릭→첫 UI 갱신까지 (System.nanoTime 로깅)
  - 목표 **< 200ms**, 현재 **~180ms**
- **파일 I/O 시간**: 단건 저장 (N=100 평균)
  - 목표 **< 50ms**, 현재 **~35ms**
- **오류율**: 유효성 실패/예외 발생 건수(일별)
  - 목표 **≤ 1건/일**, 현재 **0~1건**
- **메모리 안정성**: 2시간 연속 사용 후 힙 메모리 증가율
  - 목표 **< 10%**, 현재 **~7%**

> *TIP: `java.util.logging`/`slf4j`로 타임스탬프+구간 로깅을 남겨 재현성/회고에 활용.*
---
-->

## 🚀 향후 개선 계획

- **저장소 교체**: 텍스트 파일 → MySQL로 전환, 트랜잭션/인덱스/동시성 개선.
- **모듈화**: DAO/Service 계층 분리, 테스트 더블로 단위 테스트 확충.
- **키오스크 모드**: 풀스크린 락/유휴(Attract) 화면, 재부팅 자동 실행 스크립트.
